<!DOCTYPE html>
<html>
<head>
<title>WebSocket Samples - Ping Pong</title>
</head>
<body>
  <p />
  
    WebSocket ping and pong messages can be used variety of purposes including heartbeats, keep alive,
    or detecting network issues.   Web browsers do not provide application programming interfaces(API) to 
    send or receive notification of WebSocket ping or pong events.  A Web browser will respond to a incoming 
    ping request with an immediate pong response.
    
    <p> This example shows an example of a server sent ping request.  Entering data and clicking "Request ping" will
    send a message to the server.  The server will use the sent data to ping the browser. 
    The browser will automatically respond with a pong response with the same data.   
    The server will then process the pong message and send a message back to the client to provide verification
    the pong was received.
  <p />
  <div>
    <input id="inputmessage" type="text" />
  </div>
  <div>
    <input type="submit" value="Request Ping" onclick="send()" />
  </div>
  <div id="messages"></div>
  <script language="javascript" type="text/javascript">
    var webSocket = 
      new WebSocket('ws://' + window.document.location.host + '/WebsocketApp/listenerEndpoint');

    webSocket.onerror = function(event) {
      onError(event)
    };

    webSocket.onopen = function(event) {
      onOpen(event)
    };

    webSocket.onmessage = function(event) {
      onMessage(event)
    };
    

    function onMessage(event) {
      document.getElementById('messages').innerHTML 
        += '<br />' + event.data;
    }

    function onOpen(event) {
      document.getElementById('messages').innerHTML 
        = 'Connection established';
    }

    function onError(event) {
      alert(event.data);
    }

    function send() {
      var txt = document.getElementById('inputmessage').value;
      webSocket.send(txt);
      return false;
    }

    
    
  </script>
</body>
</html>